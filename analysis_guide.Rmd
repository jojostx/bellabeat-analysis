---
title: "Bellabeat FitBit Data Analysis Guide"
author: "Onyedikachi Ikuru"
date: "December 2025"
output: html_document
---

# Project Overview

## Dataset Context
- **Source**: [Kaggle FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit)
- **Users**: 30 participants
- **Time Period**: March 12, 2016 to May 12, 2016 (2 months)
- **Data Files**: 18 CSV files across daily, hourly, minute, and second granularities
- **Tracking Consistency**: 4-31 days per user

## Key Limitations
**Acknowledge these in your presentation:**
- Small sample size (30 users) limits generalizability
- Dataset from 2016 may not reflect current trends
- No demographic information (age, gender, location)
- Only 2 months of data; cannot capture seasonal or long-term patterns
- Inconsistent feature usage across users
- Variable tracking duration (4-31 days)

---

# Analysis Pipeline

## 1. Data Cleaning (`01_data_cleaning.R`)

### Purpose
Clean and standardize all 18 raw CSV files for analysis.

### Key Steps
1. **Load Data**: Read all CSV files from `data/raw/`
2. **Clean Column Names**: Standardize using `janitor::clean_names()`
3. **Parse Dates**: Custom datetime parser for multiple formats
4. **Data Quality**:
   - Remove duplicate records
   - Filter invalid heart rates (>220 bpm or ≤0)
   - Filter invalid daily minutes (>1440)
   - Round distances to 2 decimal places
5. **Calculate Derived Metrics**:
   - `total_active_minutes` (sum of very/fairly/lightly active)
   - `active_ratio` (active minutes / total minutes)
   - `non_wear` flag (all activity metrics = 0)
   - `sleep_efficiency` (time asleep / time in bed)
6. **Save**: 18 cleaned CSV files to `data/cleaned/`

### Output
- 18 cleaned datasets ready for analysis
- Consistent column names and data types across all files

---

## 2. Exploration (`02_exploration.R`)

### Purpose
Understand data coverage, quality, and basic patterns before deep analysis.

### A. Data Coverage Analysis

**Per Dataset:**
- Count unique users in each of 10 main datasets
- Identify which datasets have the most/least participation

**Per User:**
- Days tracked per user (range: 4-31 days)
- Classify engagement levels:
  - Everyday Users: 25-31 days
  - Heavy Users: 21-24 days
  - Moderate Users: 11-20 days
  - Light Users: 1-10 days

**Feature Utilization:**
- Which users track sleep? (~80%)
- Which users track heart rate? (~47%)
- Which users log weight? (~27%)
- Activity tracking: 100% (all users)

### B. Basic Distributions

**Activity Metrics:**
- Steps: mean, median, SD, min, max
- Calories: mean, median, SD, min, max
- Active minutes by type (very/fairly/lightly/sedentary)

**Sleep Metrics (if available):**
- Sleep hours: mean, median, SD
- Sleep efficiency: mean, median

**Outlier Detection:**
- Zero-step days
- Extreme calorie burns (>5000 or <1000)
- Abnormal sleep (<3 hours or >12 hours)

### C. Data Quality Checks

- Non-wear days per user
- Users with insufficient data (<7 days) → exclude from analysis

### Outputs Saved
- `users_per_dataset.csv`
- `user_engagement.csv`
- `feature_utilization_matrix.csv`
- `feature_summary.csv`
- Tracking frequency CSVs (sleep, weight, heart rate)

---

## 3. Analysis (`03_analysis.R`)

### Purpose
Extract insights about user behavior, activity patterns, and feature relationships.

### A. User Segmentation

**Activity Level** (based on average daily steps):
- Sedentary: <5,000 steps
- Low Active: 5,000-7,499 steps
- Somewhat Active: 7,500-9,999 steps
- Active: 10,000-12,499 steps
- Highly Active: ≥12,500 steps

**Sleep Pattern** (based on average sleep duration):
- Under-sleeper: <6 hours
- Normal sleeper: 6-8 hours
- Over-sleeper: >8 hours

**Result:** Each user classified by activity level, engagement level, and sleep pattern.

### B. Correlation Analysis

**Key Relationships Explored:**
1. Steps → Calories (expect strong positive)
2. Very Active Minutes → Calories
3. Total Active Minutes → Calories
4. Sedentary Minutes → Calories (expect weak/negative)
5. Distance → Calories
6. Steps → Distance

**Sleep-Activity Relationships:**
- Steps → Sleep Duration
- Very Active Minutes → Sleep Duration
- Steps → Sleep Efficiency
- Very Active Minutes → Sleep Efficiency

**Lag Analysis:**
- Sleep Duration → Next Day Steps

**Interpretation Categories:**
- Strong: |r| ≥ 0.7
- Moderate: |r| ≥ 0.4
- Weak: |r| ≥ 0.2
- Very Weak: |r| < 0.2

### C. Temporal Patterns

**Hourly Activity:**
- Average steps by hour of day (0-23)
- Identify peak activity hours
- Average calorie burn by hour

**Day of Week:**
- Average steps by day (Monday-Sunday)
- Weekday vs Weekend comparison
- Sleep patterns by day of week

**Weekly Trends:**
- Average steps per week (1-8+)
- User retention: active users per week
- Detect activity decline over 2-month period

### D. Sleep Analysis

**Overall Metrics:**
- Average sleep hours
- Sleep efficiency (time asleep / time in bed)
- Time awake in bed

**User-Level:**
- Sleep consistency (standard deviation)
- Consistency rating: Very Consistent, Consistent, Moderate, Inconsistent

### E. Business Questions

**Actionable Insights:**
1. **When are users most active?** → Optimal notification timing
2. **What % meet 10k step goal?** → User success metrics
3. **What % get adequate sleep (7-9h)?** → Health metrics
4. **Feature adoption by segment** → Which users use which features
5. **User retention rates** → Drop-off patterns week by week

### Outputs Saved
- `user_segments.csv`
- `correlation_matrix.csv`
- `key_correlations.csv`
- `hourly_activity_summary.csv`
- `daily_averages_by_dow.csv`
- `weekly_trends.csv`
- `sleep_analysis.csv`
- `user_sleep_consistency.csv`
- `business_insights.csv`

---

## 4. Visualization (`04_visualization.R`)

### Purpose
Create publication-ready visualizations to communicate findings.

### A. User Overview (Plots 1-4)
1. **Users per dataset** - Bar chart showing data coverage
2. **Engagement distribution** - Pie chart of user engagement levels
3. **Activity level distribution** - Bar chart of activity segments
4. **Feature utilization** - Stacked bar showing feature adoption

### B. Activity Patterns (Plots 5-8)
5. **Activity heatmap** - Hour × Day of week activity patterns
6. **Peak activity hours** - Line chart of hourly steps
7. **Steps by segment** - Boxplot comparing activity levels
8. **Weekday vs weekend** - Side-by-side comparison

### C. Correlations (Plots 9-12)
9. **Correlation matrix** - Heatmap of all variable relationships
10. **Steps vs calories** - Scatter plot with regression line
11. **Active minutes vs calories** - Scatter plot with regression
12. **Key correlations** - Bar chart summary of top relationships

### D. Temporal Trends (Plots 13-15)
13. **Weekly trends** - Line chart of average steps per week
14. **User retention** - Bar chart of active users by week
15. **Day of week patterns** - Line chart highlighting weekends

### E. Sleep Visualizations (Plots 16-18)
16. **Sleep duration** - Histogram with 7-9h guidelines
17. **Sleep efficiency by segment** - Boxplot by activity level
18. **Time in bed vs asleep** - Scatter plot showing efficiency

### F. Business Insights (Plots 19-20)
19. **Steps with 10k goal** - Histogram showing goal achievement
20. **Business insights summary** - Text visualization of key metrics

### Design Principles
- **Custom theme** (`theme_bellabeat()`) for consistency
- **Color palettes** for activity levels and engagement
- **Lowercase labels** for modern, clean aesthetic
- **300 DPI** for publication quality
- **Proper titles and subtitles** explaining each visualization

---

# Key Findings & Insights

## User Behavior
- Tracking consistency varies widely (4-31 days)
- Most users are "Moderate" or "Heavy" users (11-24 days)
- Feature adoption: Activity (100%), Sleep (80%), Heart Rate (47%), Weight (27%)

## Activity Patterns
- Peak activity likely in afternoon/evening hours
- Weekday patterns differ from weekend patterns
- Strong positive correlation between steps and calories
- Very active minutes drive calorie burn significantly

## Sleep Insights
- Most users get 6-8 hours of sleep
- Sleep efficiency varies by activity level
- Relationship between daily activity and sleep quality exists

## Business Recommendations
1. **Send notifications during peak activity hours** (identified in analysis)
2. **Promote sleep tracking** - high adoption (80%) shows user value
3. **Simplify or deprioritize weight tracking** - low adoption (27%)
4. **Target 10k step goal** - measure and encourage achievement
5. **Monitor retention** - understand drop-off patterns

---

# Tools & Technologies

## R Packages Used
- **Data manipulation**: `dplyr`, `tidyr`, `readr`
- **Data cleaning**: `janitor`, `vroom`
- **Date/time**: `lubridate`
- **Visualization**: `ggplot2`, `scales`, `forcats`
- **Project management**: `here`
- **Statistical analysis**: `broom`

## File Organization
```
project/
├── data/
│   ├── raw/          # Original 18 CSV files
│   ├── cleaned/      # 18 cleaned files
│   └── processed/    # Analysis outputs
├── plots/            # 20 visualizations
└── scripts/          # 4 R scripts
```

---

# Next Steps (Optional)

When you're ready to expand this analysis:

1. **Statistical Testing**: Add formal hypothesis tests
   - T-tests for weekday vs weekend differences
   - ANOVA for differences across activity segments
   - Chi-square tests for categorical relationships

2. **Predictive Modeling**: Build models to predict
   - Calorie burn from activity metrics
   - User drop-off risk
   - Sleep quality from daytime activity

3. **Deep Dives**: Explore minute-level patterns
   - Activity bout detection
   - Sedentary break patterns
   - Heart rate zones and recovery
   - Sleep stage analysis

4. **Advanced Visualizations**:
   - Interactive dashboards (Shiny)
   - Animated temporal changes
   - Individual user journey maps

---

# References

- **Dataset**: [FitBit Fitness Tracker Data (Kaggle)](https://www.kaggle.com/datasets/arashnic/fitbit)
- **Step Guidelines**: CDC recommends 10,000 steps/day
- **Sleep Guidelines**: National Sleep Foundation recommends 7-9 hours of sleep per day
- **Analysis Methods**: Google Data Analytics Certificate methodology

---

*This analysis was conducted as part of the Google Data Analytics Capstone Project - Bellabeat Case Study*